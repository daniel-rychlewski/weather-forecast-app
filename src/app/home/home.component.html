<div class="home-container">
  <!-- Search Bar -->
  <div class="search-container">
    <input
      type="text"
      [(ngModel)]="searchQuery"
      (input)="onSearchInput()"
      placeholder="Search for a city..."
      class="search-input"
    />

    <!-- Search Results Dropdown -->
    <div *ngIf="showDropdown && searchResults.length > 0" class="dropdown">
      <div
        *ngFor="let result of searchResults"
        class="dropdown-item"
        (click)="onSearchSelect(result)"
      >
        {{ result.name }}, {{ result.country }}
      </div>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading">Loading weather data...</div>

  <!-- Error State -->
  <div *ngIf="error && !isLoading" class="error">
    {{ error }}
    <div class="search-prompt">Please use the search bar above to find a city.</div>
  </div>

  <!-- Current Weather -->
  <div *ngIf="currentWeather && !isLoading" class="current-weather">
    <h2>{{ currentWeather.location }}</h2>
    <div class="weather-main">
      <div class="temperature">{{ currentWeather.temperature }}°C</div>
      <div class="weather-info">
        <div class="condition">
          {{ getWeatherCondition(currentWeather.weatherCode) }}
        </div>
        <div class="icon">{{ getWeatherIcon(currentWeather.weatherCode) }}</div>
      </div>
    </div>
    <button (click)="navigateToDetails()" class="details-btn">
      View Details
    </button>
  </div>

  <!-- 5-Day Forecast -->
  <div *ngIf="forecast.length > 0 && !isLoading" class="forecast">
    <h3>5-Day Forecast</h3>
    <div class="forecast-container">
      <div *ngFor="let day of forecast" class="forecast-day">
        <div class="date">{{ day.date | date:'EEE' }}</div>
        <div class="forecast-icon">{{ getWeatherIcon(day.weatherCode) }}</div>
        <div class="forecast-temp">
          <span class="high">{{ day.maxTemp }}°</span>
          <span class="low">{{ day.minTemp }}°</span>
        </div>
        <div class="forecast-condition">
          {{ getWeatherCondition(day.weatherCode) }}
        </div>
      </div>
    </div>
  </div>
</div>
